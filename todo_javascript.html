<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>todo</title>
    <style>#main{margin: 5px; padding: 5px; background: #666; color: #fff;}</style>
</head>
<body>
    <h1>配列_JavaScript</h1>

    <input type="text" id = "title">
    <button id = "add">追加</button>
    <div id = "view"></div>

    <script>
        const titles = [];
        // 追加ボタン
        document.querySelector("#add").addEventListener("click", function(){
            // 表示を削除
            document.querySelector("#view").innerHTML="";
            // 配列に追加
            titles.push(document.querySelector("#title").value);
            // 配列を表示
            titles.map((title, i) => {
                const v = document.querySelector("#view");
                const d = document.createElement("div");
                d.className = "delete";
                d.setAttribute("data-titles", i);
                d.innerHTML = title;
                v.insertBefore(d, v.firstElementChild);
            });
        });

        document.querySelector("div").addEventListener("click", function(e){
            if(e.target.className == "delete") {
                document.querySelector("#view").innerHTML="";
                // 配列から１つ削除
                titles.splice( e.target.getAttribute("data-titles"), 1 );
                // 配列を表示
                titles.map( (title, i) => {
                    console.log(i);
                    const v = document.querySelector("#view");
                    const d = document.createElement("div");
                    d.className = "delete";
                    d.setAttribute("data-titles", i);
                    d.innerHTML = title;
                    v.insertBefore(d, v.firstElementChild);
                });
            }
        });
    </script>
</body>
</html>